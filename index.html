<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Abroad Cell Form</title>

<link rel="stylesheet" href="style.css">

<!-- Local JS Libraries -->
<script src="html2canvas.min.js"></script>
<script src="jspdf.umd.min.js"></script>

</head>
<body>

<button class="download-btn" onclick="downloadPDF()">DOWNLOAD PDF</button>

<div class="form-container" id="formContent">

    <!-- HEADER -->
    <div class="custom-header">
        <div class="header-bg">
            <div class="header-center">

                <div class="hindi-title">
                    शांतिकुंज <span class="green-text">हरिद्वार</span>
                </div>

                <div class="abroad-logo">
                    <span class="broad">Abroad</span>
                    <span class="cell">Cell</span>
                    <span class="cell">Visitors</span>
                    <span class="cell">Form</span>
                </div>

            </div>
        </div>
    </div>

    <div class="fill-note">PLEASE FILL IN CAPITAL LETTERS</div>

    <!-- PERSONAL DETAILS -->
    <p class="section-title">PERSONAL DETAILS</p>

    <table>
        <tr><td>FULL NAME</td><td><input type="text" style="width:400px"></td></tr>

        <tr>
            <td>DATE OF BIRTH</td>
            <td>
                <input type="date" class="date-field">
                DATE OF MARRIAGE
                <input type="date" class="date-field">
            </td>
        </tr>

        <tr><td>ADDRESS</td><td><input type="text" style="width:500px"></td></tr>
        <tr><td>CITY</td><td><input class="small-input"> STATE <input class="small-input"></td></tr>
        <tr><td>ZIP CODE</td><td><input class="small-input"> COUNTRY <input class="small-input"></td></tr>
        <tr><td>TELEPHONE NO.</td><td><input class="small-input"> MOBILE NO.<input class="small-input"></td></tr>
        <tr><td>E-MAIL ID</td><td><input type="email" style="width:300px"></td></tr>
        <tr><td>QUALIFICATION</td><td><input class="small-input"> PROFESSION <input class="small-input"></td></tr>
        <tr><td>ASSOCIATED WITH AWGP SINCE</td><td><input class="small-input"></td></tr>
        <tr><td>PARTICIPATE IN ACTIVITY OF AWGP</td><td><input style="width:300px"></td></tr>
    </table>

    <!-- FAMILY DETAILS -->
    <p class="section-title">FAMILY DETAILS RESIDING IN THE ABOVE ADDRESS</p>

    <table class="responsive-table">
        <thead>
            <tr><th>NAME</th><th>DOB</th><th>RELATION</th><th>PROFESSION</th></tr>
        </thead>
        <tbody>
            <tr><td><input></td><td><input type="date"></td><td><input></td><td><input></td></tr>
            <tr><td><input></td><td><input type="date"></td><td><input></td><td><input></td></tr>
            <tr><td><input></td><td><input type="date"></td><td><input></td><td><input></td></tr>
            <tr><td><input></td><td><input type="date"></td><td><input></td><td><input></td></tr>
        </tbody>
    </table>

    <!-- RELATIVE DETAILS -->
    <p class="section-title">RELATIVE IN OTHER COUNTRY</p>

    <table class="responsive-table">
        <thead><tr><th>NAME</th><th>RELATION</th><th>COUNTRY</th><th>E-MAIL ID</th></tr></thead>
        <tbody>
            <tr><td><input></td><td><input></td><td><input></td><td><input></td></tr>
            <tr><td><input></td><td><input></td><td><input></td><td><input></td></tr>
            <tr><td><input></td><td><input></td><td><input></td><td><input></td></tr>
            <tr><td><input></td><td><input></td><td><input></td><td><input></td></tr>
        </tbody>
    </table>

    <!-- MAGAZINES -->
    <p class="section-title">MAGAZINE SUBSCRIPTION DETAILS</p>

    <table>
        <tr><td>AKHAND JYOTI</td><td>HINDI <input type="radio"> ENGLISH <input type="radio"> BANGLA <input type="radio"> ODHIYA <input type="radio"> ASAMIYA <input type="radio"></td></tr>
        <tr><td>YUG SHAKTI GAYATRI</td><td>HINDI <input type="radio"> GUJRATI <input type="radio"> BANGLA <input type="radio"> ODHIYA <input type="radio"> MARATHI <input type="radio"></td></tr>
        <tr><td>PRAGYA ABHIYAN</td><td>HINDI <input type="radio"> GUJRATI <input type="radio"></td></tr>
        <tr><td>YUG PRABHA VIDEO</td><td>HINDI <input type="radio"></td></tr>
        <tr><td>YUG NIRMAN YOJNA</td><td>HINDI <input type="radio"> GUJRATI <input type="radio"></td></tr>
    </table>

    <table>
        <tr><td>PARIJAN STATUS <input type="checkbox"></td>
            <td>NEW <input type="checkbox"> KEY PERSON <input type="checkbox"> BSS <input type="checkbox"></td></tr>
    </table>

    <br><br>
    DATE: <input type="date">
    <div class="signature">SIGNATURE</div>

</div>

<!-- AUTO UPPERCASE -->
<script>
document.querySelectorAll("input,textarea").forEach(el=>{
    el.addEventListener("input",()=> el.value = el.value.toUpperCase());
});
</script>

<!-- PERFECT ONE-PAGE PDF SCRIPT (COMPRESSED) -->
<script>
async function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const element = document.getElementById("formContent");

    // TEMP SCALE FOR PHONE
    element.style.transform = "scale(0.75)";
    element.style.transformOrigin = "top left";

    await new Promise(res => setTimeout(res, 300));

    const canvas = await html2canvas(element, {
        scale: 1.3,
        useCORS: true,
        scrollX: 0,
        scrollY: 0,
        windowWidth: element.scrollWidth * 0.75
    });

    // RESET
    element.style.transform = "";

    // Compressed JPEG
    const imgData = canvas.toDataURL("image/jpeg", 0.6);

    const pdf = new jsPDF("p", "mm", "a4");
    const pageWidth = pdf.internal.pageSize.getWidth();
    const imgHeight = canvas.height * (pageWidth / canvas.width);

    pdf.addImage(imgData, "JPEG", 0, 0, pageWidth, imgHeight, undefined, "FAST");

    pdf.save("Abroad_Cell_Form.pdf");
}
</script>

</body>
</html>
